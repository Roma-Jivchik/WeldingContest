version: '3.4'
name: welding-contest

services:
  weldingcontest:
    container_name: weldingcontest
    build:
      context: ..
      dockerfile: ./WeldingContest/Dockerfile
    environment:
      ASPNETCORE_ENVIRONMENT: "Docker"
    ports:
      - "5000:80"
    depends_on:
      - db

  db:
    container_name: weldingcontest-db
    image: mcr.microsoft.com/mssql/server:2019-latest
    environment:
      MSSQL_SA_PASSWORD: YourStrong!Passw0rd
      ACCEPT_EULA: Y
    ports:
      - "1433:1433"
    volumes:
      - ./dbdata:/var/opt/mssql/data

volumes:
  dbdata: